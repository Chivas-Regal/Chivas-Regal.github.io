---
layout: post
title: 背包DP
subtitle: DP奇奇怪怪的模型？🤔
categories: 动态规划
tags: [动态规划]
---

<head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
	<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
	</style>
        <style>
		.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
	</style>
</head>
<body class="vscode-body vscode-light">
        <p>{{TOC}}</p>
<h2 id="定义">定义</h2>
<p>背包问题是DP的<span style="color: red;">经典模型</span><br>
一般会给定背包的一些属性、一些物品和这些物品的一些属性<br>
<mark>询问针对某些物品的属性，在背包对应属性的约束下，出现的一些最值情况</mark></p>
<p>背包常考种类：<span style="color: red;">01背包</span>、完全背包、多重背包、精准装满的背包、分组背包、二维费用背包、混合背包、有依赖性物品的背包、物品泛化价值的背包.<br>
<span style="color: red;">以01背包为主体</span>，其他背包在子问题、状态、转移方程上大同小异</p>
<h2 id="01背包">01背包</h2>
<p><mark>01背包是最为简单的背包，但也是最为重要的背包，是作为所有背包类型的一个基础</mark></p>
<h3 id="模型">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，这些物品<span style="color: red;">只有拿或者不拿两种情况</span><br>
问最多使背包容纳下多少价值的物品</p>
<h3 id="子问题">子问题</h3>
<p>遇上了一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mtext>体积，价值</mtext><mo stretchy="false">}</mo><mo>=</mo><mo stretchy="false">{</mo><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{体积， 价值\} = \{v[i], w[i]\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord cjk_fallback">体积，价值</span><span class="mclose">}</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]}</span></span></span></span> 的物品，此时背包剩余体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span><br>
那么子问题则是：在拿这个物品之前（也就是体积&quot; <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>−</mo><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">V-v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 或者 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> &quot;）的背包在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 之前的物品中拿到的最大总价值。</p>
<h3 id="状态">状态</h3>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> 表示在前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 个物品中，用容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 的背包存放最多能存放多少价值</p>
<h3 id="转移方程">转移方程</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.1600em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>j</mi><mo>&lt;</mo><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">]</mo><mo>+</mo><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">)</mo><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>j</mi><mo>≥</mo><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">dp[i][j]=
  \left\{\begin{matrix} 
   dp[i-1][j],&amp;j\lt w[i]\\
   max(dp[i-1][j],dp[i-1][j-w[i]]+v[i]),&amp;j\ge w[i]
\end{matrix}\right.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">])</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<h3 id="处理方式">处理方式</h3>
<p>循环最外层按顺序枚举物品，表示这是前几个物品，为第一维信息。<br>
最内层<span style="color: red;">倒序</span>(防止出现一个物品因性价比高在一轮里面使用多次的情况)枚举容积。</p>
<blockquote>
<p>设有4样物品，在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">{v[i], w[i]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span></span> 的格式下分别为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mn>1</mn><mo separator="true">,</mo><mn>1</mn></mrow><mo separator="true">,</mo><mrow><mn>4</mn><mo separator="true">,</mo><mn>10</mn></mrow><mo separator="true">,</mo><mrow><mn>5</mn><mo separator="true">,</mo><mn>4</mn></mrow><mo separator="true">,</mo><mrow><mn>3</mn><mo separator="true">,</mo><mn>7</mn></mrow></mrow><annotation encoding="application/x-tex">{1,1},{4,10},{5,4},{3,7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">10</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">7</span></span></span></span></span> ,有背包容积 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo>=</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">V=10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">10</span></span></span></span> ，问装载最大价值</p>
</blockquote>
<table>
	<tr>
		<th>id\V</th><th>0</th><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th>
	</tr>
	<tr>
		<th>1</th><td>0</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td>
	</tr>
	<tr>
		<th>2</th><td>0</td><td>1</td><td>1</td><td>1</td><td>10</td><td>11</td><td>11</td><td>11</td><td>11</td><td>11</td><td>11</td>
	</tr>
	<tr>
		<th>3</th><td>0</td><td>1</td><td>1</td><td>1</td><td>10</td><td>11</td><td>11</td><td>11</td><td>11</td><td>14</td><td>15</td>
	</tr>
	<tr>
		<th>4</th><td>0</td><td>1</td><td>1</td><td>7</td><td>8</td><td>8</td><td>8</td><td>17</td><td>18</td><td>18</td><td>18</td>
	</tr>
</table>
<h3 id="程序">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxV = <span class="hljs-number">1000</span>, maxn = <span class="hljs-number">10000</span>;
<span class="hljs-keyword">int</span> dp[maxV][maxn]

<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = V; j &gt;= v[i]; j -- ) {
		dp[i][j] = MAX(dp[i - <span class="hljs-number">1</span>][j], dp[i - <span class="hljs-number">1</span>][j - v[i]] + w[i]);
	}
}
</div></code></pre>
<p><br><span style="color: red;">Question：</span>如果物品较多，体积较大，两者在一个二维数组内占空间不会少，那么如何优化空间呢？<br>
<span style="color: red;">Answer:</span>使用滚动数组<br><br>
在循环过程中， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathnormal">i</span></span></span></span> 似乎只作用于保存上一次内循环的结果，而可以看作无实际意义，但是上一次内层循环的结果在本次改变之前是不会动的，所以我们完全可以舍去这一维去进行循环</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxV = <span class="hljs-number">1000</span>;
<span class="hljs-keyword">int</span> dp[maxV];

<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = V; j &gt;= v[i]; j -- ) {
		dp[j] = MAX(dp[j], dp[j - v[i]] + w[i]);
	}
}
</div></code></pre>
<h3 id="例题">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720090230837.png) ; height: 600px; width: 540px; background-size: 600px 600px; border-radius:15px;" href="https://vjudge.net/contest/447638#problem/M"> </a>
<br><br>
改了一点，这里是一个记录信息的01背包<br>
总音轨是体积，每个磁带的minus是体积也是价值<br>
对于这个问题，我们可以把问题设为：<span style="color:red;">要求最大价值，顺便记录一下内容</span>。<br>
那么可以开一个 <code>pair&lt;vector&lt;int&gt;, int&gt;dp[N]</code> 用来表示dp信息，其中前面的表示内部物品，后面是上文中dp出的最大价值<br>
在更新的时候，比较只需要跟以前一样拿后面的数进行比较，而更新的时候需要first、second一起更新</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">10000</span>;
<span class="hljs-built_in">pair</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;, <span class="hljs-keyword">int</span>&gt; dp[N];
<span class="hljs-keyword">int</span> n, num, minutes[N]; <span class="hljs-comment">// 这里体积等于价值等于minutes[i]</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">while</span> ( <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;num) == <span class="hljs-number">2</span> ) {
                Init (); <span class="hljs-comment">//初始化dp为空即可</span>
                
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i ++ ) minutes[i] = inputInt(); 
                
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; num; i ++ ) {
                        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = n; j &gt;= minutes[i]; j -- ) {
                                <span class="hljs-keyword">if</span> ( dp[j].second &lt; dp[j - minutes[i]].second + minutes[i] ) <span class="hljs-comment">//朴素的比较</span>
                                        dp[j] = dp[j - minutes[i]],
                                        dp[j].first.push_back(minutes[i]),
                                        dp[j].second += minutes[i]; <span class="hljs-comment">//一起更新</span>
                        }
                }
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; dp[n].first.size(); i ++, <span class="hljs-built_in">putchar</span>(<span class="hljs-string">&#x27; &#x27;</span>) ) outInt(dp[n].first[i]);
                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;sum:%d\n&quot;</span>, dp[n].second);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="完全背包">完全背包</h2>
<h3 id="模型-1">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，这些物品<span style="color: red;">可以拿任意个</span><br>
问最多使背包容纳下多少价值的物品</p>
<h3 id="处理方式-1">处理方式</h3>
<p>循环最外层按顺序枚举物品，表示这是前几个物品，为第一维信息。<br>
最内层<span style="color: red;">正序</span>(需要出现一个物品因性价比高在一轮里面使用多次的情况)枚举容积。</p>
<h3 id="程序-1">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = v[i]; j &lt;= V; j ++ ) {
		dp[j] = MAX(dp[j], dp[j - v[i] + w[i]);
	}
}
</div></code></pre>
<h3 id="例题-1">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720093102465.png); height: 600px; width: 666px; background-size: 666px 600px; border-radius:15px;" href="http://acm.hdu.edu.cn/showproblem.php?pid=1248"> </a>
<br><br>
此时背包体积为骑士带的钱数，三种药瓶的花费既是体积也是价值<br>
其余的就是基本的完全背包模板</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">11000</span>;
<span class="hljs-keyword">int</span> dp[N];
<span class="hljs-keyword">int</span> a[<span class="hljs-number">3</span>] = {<span class="hljs-number">150</span>, <span class="hljs-number">200</span>, <span class="hljs-number">350</span>};

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">int</span> cass;
        <span class="hljs-keyword">for</span>( cass = inputInt(); cass; cass -- ) {
                MEM(dp, <span class="hljs-number">0</span>); <span class="hljs-keyword">int</span> V = inputInt();
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i ++ ) {
                        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = a[i]; j &lt;= V; j ++) { 
                                dp[j] = MAX(dp[j], dp[j - a[i]] + a[i]);
                        }
                }
                outInt(V - dp[V]); <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="多重背包">多重背包</h2>
<h3 id="前置知识-二进制拆分">前置知识-二进制拆分</h3>
<blockquote>
<p><span style="color: red;">合理性：</span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> 从 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>→</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1\rightarrow n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 的整数次幂中选若干个相加，可以表示出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>→</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>+</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0\rightarrow 2^{n+1}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 这些整数</p>
</blockquote>
<p>二进制拆分是一种合理分配物品的手段，有效避免了一个个分配的高复杂度<br>
<mark>通过二进制拆分我们可以把一个固定很大数量的物品在很快的速度下分成一块块独立的小01背包物品</mark></p>
<p>合并中的个数按顺序为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>0</mn></msup><mo separator="true">,</mo><mtext>  </mtext><msup><mn>2</mn><mn>1</mn></msup><mo separator="true">,</mo><mtext>  </mtext><msup><mn>2</mn><mn>2</mn></msup><mtext>  </mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mtext>  </mtext><msup><mn>2</mn><mi>k</mi></msup><mo separator="true">,</mo><mtext>  </mtext><msup><mn>2</mn><mrow><mi>k</mi><mo>+</mo><mn>1</mn></mrow></msup><mo separator="true">,</mo><mtext>  </mtext><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">2^0,\;2^1,\;2^2\;....\;2^k,\;2^{k+1},\;...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.043548em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">....</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">...</span></span></span></span><br>
在无法完整拆分为一整块二次幂数量时停止，并将剩下的这些物品自己合并为一块<br>
例： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mo>→</mo><mn>1</mn><mo separator="true">,</mo><mtext>  </mtext><mn>2</mn><mo separator="true">,</mo><mtext>  </mtext><mn>4</mn><mo separator="true">,</mo><mtext>  </mtext><mn>8</mn><mo separator="true">,</mo><mtext>  </mtext><mn>5</mn></mrow><annotation encoding="application/x-tex">20\rightarrow1,\;2,\;4,\;8,\;5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">20</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span></span></span></span></p>
<pre><code class="language-cpp"><div><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; V, W; <span class="hljs-comment">//拆分后每一块的物品和价值</span>
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">manage</span> <span class="hljs-params">( <span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> v, <span class="hljs-keyword">int</span> w )</span> </span>{ <span class="hljs-comment">// 个数，体积，价值</span>
	<span class="hljs-keyword">int</span> t = <span class="hljs-number">1</span>; <span class="hljs-comment">// 拆到的块一块包含的物品数</span>
	<span class="hljs-keyword">while</span>(x &gt;= t){
		V.push_back(v * t); 
		W.push_back(w * t);
		x -= t;
		t &lt;&lt;= <span class="hljs-number">1</span>;
	}
	<span class="hljs-keyword">if</span>(x) V.push_back(v * x), W.push_back(w * x);
}

<span class="hljs-comment">/*
 *当然也可以写到输入里面
 *看个人喜好
*/</span>
</div></code></pre>
<h3 id="模型-2">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> , <span style="color: red;">数量</span>为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">x[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">x</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span><br>
问最多使背包容纳下多少价值的物品</p>
<h3 id="处理方式-2">处理方式</h3>
<p>用二进制拆分把多重背包变成01背包
循环最外层按顺序枚举物品，表示这是前几个物品，为第一维信息。<br>
最内层<span style="color: red;">正序</span>(需要出现一个物品因性价比高在一轮里面使用多次的情况)枚举容积。</p>
<h3 id="程序-2">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ ) {
	<span class="hljs-keyword">int</span> x = inputInt(), v = inputInt(), w = inputInt();
	Manage(x, v, w);
}
<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; V.size(); i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = v[i]; j &lt;= V; j ++ ) {
		dp[j] = MAX(dp[j], dp[j - V[i] + W[i]);
	}
}
</div></code></pre>
<h3 id="例题-2">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720101513353.png); height: 620px; width: 540px;background-size: 540px 620px; border-radius:15px;" href="https://vjudge.net/contest/447638#problem/L"> </a>
<br><br>
这是一个<span style="color: red;">方案数类</span>的背包dp问题<br>
首先就是和多重背包一样要二进制拆分一下<br>
方案数在聚合时，类似于递推经典题的爬楼梯问题<br>
聚合方案数得到最终值<br><br>
在这里我们聚合方案数时就是背包的中心转移方程改编： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>+</mo><mo>=</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">dp[j] += dp[j - v[i]]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]]</span></span></span></span></p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">110</span>, M = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;
<span class="hljs-keyword">int</span> a[N], c[N];
<span class="hljs-keyword">int</span> dp[M];

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
        <span class="hljs-keyword">int</span> n, m;
        <span class="hljs-keyword">while</span> ( <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m) == <span class="hljs-number">2</span> &amp;&amp; n || m ) {
                <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; cost; <span class="hljs-comment">// 转换输入：二进制转换</span>
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ ) a[i] = inputInt();
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ ) {
                        c[i] = inputInt();
                        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> k = <span class="hljs-number">1</span>; k &lt;= c[i]; k &lt;&lt;= <span class="hljs-number">1</span> ) {
                                c[i] -= k;
                                cost.push_back ( k * a[i] );
                        }
                        <span class="hljs-keyword">if</span>(c[i]) cost.push_back ( c[i] * a[i] );
                }

                <span class="hljs-comment">// 开始多重背包</span>
                MEM(dp, <span class="hljs-number">0</span>); dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// 初始化：0就是都不拿，有这么一种拿法</span>
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; cost.size(); i ++ ) {
                        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = m; j &gt;= cost[i]; j --) {
                                dp[j] += dp[j - cost[i]]; <span class="hljs-comment">// 集合前面的方案数</span>
                        }
                }

                <span class="hljs-keyword">int</span> res = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i ++ ) res += dp[i] != <span class="hljs-number">0</span>;
                outInt(res); <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;&quot;</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="精准装满的背包">精准装满的背包</h2>
<p>写法和上题几乎一样，都是聚合方案数，然后对每一个子问题（小容量）分析是否有方案</p>
<h2 id="分组背包">分组背包</h2>
<h3 id="模型-3">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> , <span style="color: red;">物品被分成几组，每组的物品只能选一个放进背包</span><br>
问最多使背包容纳下多少价值的物品</p>
<h3 id="处理方式-3">处理方式</h3>
<p>以组为外部遍历，一组挑取一个（组号与当前枚举组相同的），以<span style="color: red;">体积为第二层循环，以物品为第三层循环</span>，这样在加了一个特判之后可以<span style="color: red;">保证每一组内的物品最多有一个被加入背包</span></p>
<h3 id="程序-3">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> group = <span class="hljs-number">1</span>; group &lt;= groups; group ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = m; j &gt;= <span class="hljs-number">0</span>; j -- ) {
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i ++ ) {
			<span class="hljs-keyword">if</span> ( gp[i] == group &amp;&amp; j &gt;= v[i] ) dp[j] = MAX(dp[j], dp[j - v[i]] + w[i]);
		}
	}
}
</div></code></pre>
<h3 id="例题-3">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720161804136.png); height: 500px; width: 510px; background-size: 510px 500px; border-radius:15px;" href="https://www.luogu.com.cn/problem/P1757"> </a>
<br><br></p>
<p>就像上面说的那样，这里给了物品体积，价值，组编号， 我们就只需要照着这个顺序来写即可</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">int</span> v[<span class="hljs-number">1005</span>], w[<span class="hljs-number">1005</span>], s[<span class="hljs-number">1005</span>];<span class="hljs-comment">//物品占体积，价值，所占组数</span>

<span class="hljs-keyword">int</span> nSet = <span class="hljs-number">0</span>;<span class="hljs-comment">//最多的组数</span>
<span class="hljs-keyword">int</span> dp[<span class="hljs-number">1005</span>];

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> m, n;
    <span class="hljs-built_in">cin</span> &gt;&gt; m &gt;&gt; n;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)
        <span class="hljs-built_in">cin</span> &gt;&gt; v[i] &gt;&gt; w[i] &gt;&gt; s[i], nSet = max(nSet, s[i]);<span class="hljs-comment">//找出枚举组数的范围</span>

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> <span class="hljs-built_in">set</span> = <span class="hljs-number">1</span>; <span class="hljs-built_in">set</span> &lt;= nSet; <span class="hljs-built_in">set</span>++) <span class="hljs-comment">//枚举组</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = m; j &gt;= <span class="hljs-number">0</span>; j--) <span class="hljs-comment">//枚举体积</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n;i++) <span class="hljs-comment">//枚举物品（要放在最里面，保证每一组内的物品最多有一个被加入背包）</span>
                <span class="hljs-keyword">if</span>(s[i] == <span class="hljs-built_in">set</span> &amp;&amp; j &gt;= v[i])
                    dp[j] = max(dp[j], dp[j - v[i]] + w[i]);
    
    <span class="hljs-built_in">cout</span> &lt;&lt; dp[m] &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="二维费用">二维费用</h2>
<h3 id="模型-4">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，<span style="color: red;">最大承重</span>为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ， <span style="color: red;">质量</span>为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">m[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span>
问最多使背包容纳下多少价值的物品</p>
<blockquote>
<p>一般是这类质量问题，不过有很多的较难的题都会将第二维费用放得很隐晦</p>
</blockquote>
<h3 id="状态表示">状态表示</h3>
<p>此时状态也要变化，由<span style="color: red;">两维做下标</span>方便直接查到并利用这个最优解</p>
<h3 id="处理方式-4">处理方式</h3>
<p>与01背包一样，循环外层枚举物品，内层建立约束循环</p>
<h3 id="程序-4">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> maxV = <span class="hljs-number">100</span>, maxM = <span class="hljs-number">100</span>;
<span class="hljs-keyword">int</span> dp[maxV][maxM];

<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = V; j &gt;= v[i]; j -- ) {
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> k = M; k &gt;= m[i]; k -- ) {
			dp[j][k] = MAX(dp[j][k], dp[j - v[i]][k - m[i]] + w[i]);
		}
	}
}
</div></code></pre>
<h3 id="例题-4">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720165842590.png); height: 600px; width: 540px; background-size: 540px 600px; border-radius:15px;" href="https://www.luogu.com.cn/problem/P1507"> </a>
<br><br>
解法上面的程序几乎没什么区别</p>
<h2 id="混合背包">混合背包</h2>
<h3 id="模型-5">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ， <span style="color: red;">有的物品只能拿一个，有的物品可以拿好几个，也有的物品可以拿任意个</span></p>
<h3 id="处理方式-5">处理方式</h3>
<p>物品被分为<span style="color: red;">两个遍历顺序</span>，一个是以多重背包化成的01背包和原01背包的顺序，一个是完全背包的顺序</p>
<h3 id="程序-5">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-keyword">int</span> maxV = <span class="hljs-number">1000</span>;
<span class="hljs-keyword">int</span> id[<span class="hljs-number">10000</span>]; <span class="hljs-comment">// 标记，0为01背包，1为完全背包</span>

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Manage</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= N; i ++ ) {
		<span class="hljs-keyword">if</span>() {} <span class="hljs-comment">// 若多重或者01就二进制拆分一下</span>
		<span class="hljs-keyword">else</span> {} <span class="hljs-comment">// 若不是就自己开一个，两者做好区分标记</span>
	}
}



<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ ) {
	<span class="hljs-keyword">if</span> ( id[i] ) {
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = v[i]; j &lt;= V; j ++ ) { 
			dp[j] = MAX(dp[j], dp[j - v[i]] + w[i]);
		}
	} <span class="hljs-keyword">else</span> {
		<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = V; j &gt;= v[i]; j -- ) {
			dp[j] = AMX(dp[j], dp[j - v[i]] + w[i]);
		}
	}
}
</div></code></pre>
<h3 id="例题-5">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720173920720.png); height: 800px; width: 540px; background-size: 540px 800px; border-radius:15px;" href="https://www.luogu.com.cn/problem/P1833"> </a>
<br><br></p>
<p>与上面一样，就是看如何去划分物品，分为两个部分。一个01背包部分，一个完全背包部分。<br>
划分之后的物品也要记得<span style="color: red;">标记</span></p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">int</span> T;
<span class="hljs-keyword">int</span> N;
<span class="hljs-keyword">int</span> t[<span class="hljs-number">100005</span>], w[<span class="hljs-number">100005</span>], flag[<span class="hljs-number">100005</span>];<span class="hljs-comment">//敲进去的每种花的用时、满足感、flag</span>
<span class="hljs-keyword">int</span> manaT[<span class="hljs-number">100005</span>], manaW[<span class="hljs-number">100005</span>], manaFlag[<span class="hljs-number">100005</span>];<span class="hljs-comment">//组合后的</span>
<span class="hljs-keyword">int</span> cnt = <span class="hljs-number">1</span>;<span class="hljs-comment">//组合后的组数</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">manage</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= N; i++)
    {
        <span class="hljs-keyword">if</span> (flag[i])<span class="hljs-comment">//若01或多重就二进制一下</span>
        {
            <span class="hljs-keyword">int</span> x = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">while</span> (flag[i] &gt;= x)
            {
                manaT[cnt] = t[i] * x;
                manaW[cnt] = w[i] * x;
                manaFlag[cnt++] = <span class="hljs-number">1</span>;<span class="hljs-comment">//01与多重物品标记为1</span>
                flag[i] -= x;
                x &lt;&lt;= <span class="hljs-number">1</span>;
            }
            <span class="hljs-keyword">if</span> (flag[i])
                manaT[cnt] = t[i] * flag[i], manaW[cnt] = w[i] * flag[i], manaFlag[cnt++] = <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">else</span><span class="hljs-comment">//若完全就自己开一个</span>
        {
            manaT[cnt] = t[i];
            manaW[cnt] = w[i];
            manaFlag[cnt++] = <span class="hljs-number">0</span>;<span class="hljs-comment">//完全物品标记为0</span>
        }
    }
}
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">int</span> h1, m1, h2, m2;
    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d:%d%d:%d&quot;</span>, &amp;h1, &amp;m1, &amp;h2, &amp;m2);
    T = h2 * <span class="hljs-number">60</span> + m2 - h1 * <span class="hljs-number">60</span> - m1;<span class="hljs-comment">//计算总时间（背包总容量）</span>

    <span class="hljs-built_in">cin</span> &gt;&gt; N;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= N; i++)
        <span class="hljs-built_in">cin</span> &gt;&gt; t[i] &gt;&gt; w[i] &gt;&gt; flag[i];
    manage();

    <span class="hljs-keyword">int</span> dp[T + <span class="hljs-number">10</span>] = {<span class="hljs-number">0</span>};<span class="hljs-comment">//dp[i]表示在前i时间获取最大满足感</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; cnt; i++)
    {
        <span class="hljs-comment">//下面是三种背包物品的不同递推操作</span>
        <span class="hljs-keyword">if</span> (manaFlag[i])<span class="hljs-comment">//01与多重</span>
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = T; j &gt;= manaT[i]; j--)
                dp[j] = max(dp[j], dp[j - manaT[i]] + manaW[i]);
        }
        <span class="hljs-keyword">else</span><span class="hljs-comment">//完全</span>
        {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = manaT[i]; j &lt;= T; j++)
                dp[j] = max(dp[j], dp[j - manaT[i]] + manaW[i]);
        }
    }
    
    <span class="hljs-built_in">cout</span> &lt;&lt; dp[T] &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="有依赖性物品的背包">有依赖性物品的背包</h2>
<h3 id="模型-6">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ， <span style="color: red;">这些物品中有一些依赖关系，如果装了某样东西，也必须装另外一样东西</span>
问最多使背包容纳下多少价值的物品</p>
<h3 id="处理方式-6">处理方式</h3>
<p>先预处理一下，将同依赖性物品分为一组，建立<span style="color: red;">下标关系</span>（一般可以让被依赖物品作为0，依赖别物品 a 的物品 x 作为 a 数组后面的正数下标）。<br>
然后在选择物品时，先只选择被依赖物品，然后根据价值贡献决定是否要选依赖这个物品的物品</p>
<h3 id="程序-6">程序</h3>
<p>这个不好表示，详见题目与代码</p>
<h3 id="例题-6">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720190545335.png); height: 861px; width: 480px;background-size:480px 861px; border-radius:15px;" href="https://www.luogu.com.cn/problem/P1064"> </a>
<br><br>
按上面说的处理方式<br>
我们首先应该对物件预处理：设置一个主导位置也就是 [0]，对附件设置[1]和[2]<br>
我们不用考虑是不是买这个附件连带着主件一起买，而是应该考虑买这个主件的时候要不要买附件<br>
这样就有了一个可操作空间去决策，买这个主件附带的这个附件是否会更优</p>
<pre><code class="language-cpp"><div><span class="hljs-keyword">int</span> v[<span class="hljs-number">100</span>][<span class="hljs-number">3</span>], w[<span class="hljs-number">100</span>][<span class="hljs-number">3</span>]; <span class="hljs-comment">//v[i][j]表示第i套物品的前j件的体积，w[i][j]表示第i套物品的前j件价值</span>
<span class="hljs-keyword">int</span> V;<span class="hljs-comment">//背包容量</span>
<span class="hljs-keyword">int</span> n;<span class="hljs-comment">//物品个数</span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
   <span class="hljs-built_in">cin</span> &gt;&gt; V &gt;&gt; n;
   <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n;i++)<span class="hljs-comment">//优化：主附件并为一个组合，每次遇到附件就将它挪到主件那一组</span>
   {
       <span class="hljs-keyword">int</span> a, b, c;
       <span class="hljs-built_in">cin</span> &gt;&gt; a &gt;&gt; b &gt;&gt; c;<span class="hljs-comment">//a表示这件物品的体积，a*b表示这件物品的价值，c表这件物品的主件情况</span>
       <span class="hljs-keyword">if</span>(!c)<span class="hljs-comment">//若为主件</span>
           v[i][<span class="hljs-number">0</span>] = a, w[i][<span class="hljs-number">0</span>] = a * b;
       <span class="hljs-keyword">else</span><span class="hljs-comment">//若为附件</span>
       {
           <span class="hljs-keyword">if</span>(!w[c][<span class="hljs-number">1</span>])<span class="hljs-comment">//主件后面第一个没有被占，放在第一个</span>
               v[c][<span class="hljs-number">1</span>] = a, w[c][<span class="hljs-number">1</span>] = a * b;
           <span class="hljs-keyword">else</span><span class="hljs-comment">//被占了，放在第二个</span>
               v[c][<span class="hljs-number">2</span>] = a, w[c][<span class="hljs-number">2</span>] = a * b;
       }
   }

   <span class="hljs-keyword">int</span> dp[<span class="hljs-number">32010</span>];
   <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n;i++)
   {
       <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = V; j &gt;= v[i][<span class="hljs-number">0</span>] &amp;&amp; v[i][<span class="hljs-number">0</span>]; j--)<span class="hljs-comment">//稍微优化一下时间，记住：附件是没有自己的i的（地位好低）</span>
       {
           dp[j] = max(dp[j], dp[j - v[i][<span class="hljs-number">0</span>]] + w[i][<span class="hljs-number">0</span>]);<span class="hljs-comment">//只选主件</span>
           v[i][<span class="hljs-number">0</span>] + v[i][<span class="hljs-number">1</span>] &gt; j ?: dp[j] = max(dp[j], dp[j - v[i][<span class="hljs-number">0</span>] - v[i][<span class="hljs-number">1</span>]] + w[i][<span class="hljs-number">0</span>] + w[i][<span class="hljs-number">1</span>]);<span class="hljs-comment">//买主件与第一个附件</span>
           v[i][<span class="hljs-number">0</span>] + v[i][<span class="hljs-number">2</span>] &gt; j ?: dp[j] = max(dp[j], dp[j - v[i][<span class="hljs-number">0</span>] - v[i][<span class="hljs-number">2</span>]] + w[i][<span class="hljs-number">0</span>] + w[i][<span class="hljs-number">2</span>]);<span class="hljs-comment">//买主件与第二个附件</span>
           v[i][<span class="hljs-number">0</span>] + v[i][<span class="hljs-number">1</span>] + v[i][<span class="hljs-number">2</span>] &gt; j ?: dp[j] = max(dp[j], dp[j - v[i][<span class="hljs-number">0</span>] - v[i][<span class="hljs-number">1</span>] - v[i][<span class="hljs-number">2</span>]] + w[i][<span class="hljs-number">0</span>] + w[i][<span class="hljs-number">1</span>] + w[i][<span class="hljs-number">2</span>]);<span class="hljs-comment">//买主件与两个附件</span>
       }
   }
   <span class="hljs-built_in">cout</span> &lt;&lt; dp[V] &lt;&lt; <span class="hljs-built_in">endl</span>;
   <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="泛化物品背包">泛化物品背包</h2>
<h3 id="模型-7">模型</h3>
<p>给定一个背包，容量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> ，也有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> 个物品，每个物品价值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w(i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mclose">)</span></span></span></span> ，体积为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span><br>
<span style="color: red;">⚠️：其中的物品价值是个函数，表示会随某种情况而改变</span></p>
<h3 id="处理方式-7">处理方式</h3>
<p>物品的价值没有一个固定的数组，而是<span style="color: red;">设一个计算函数，在特定的情况特定传入即可</span></p>
<h3 id="程序-7">程序</h3>
<pre><code class="language-cpp"><div><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getW</span> <span class="hljs-params">( <span class="hljs-keyword">int</span> i )</span> </span>{
	<span class="hljs-keyword">return</span> w[i] * <span class="hljs-number">10</span>;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getV</span> <span class="hljs-params">( <span class="hljs-keyword">int</span> i )</span> </span>{
	<span class="hljs-keyword">return</span> v[i] * <span class="hljs-number">10</span>;
}
<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i ++ ) {
	<span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = V; j &gt;= v[i]; j -- ) {
		dp[j] = MAX ( dp[j], dp[j - getV ( i )] + getW ( i ) );
	}
}
</div></code></pre>
<h3 id="例题-7">例题</h3>
<p><a style="display: block; background-image:url(https://img-blog.csdnimg.cn/20210720193523990.png); height: 666px; width: 500px;background-size: 500px 666px; border-radius:15px;" href="https://www.luogu.com.cn/problem/P1417"> </a>
<br><br></p>
<p>令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span></span></span></span> 表示菜<br>
设计一下 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">v[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">w[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>t</mi><mtext>，</mtext><mtext>  </mtext><mi>w</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>a</mi><mo>−</mo><mi>j</mi><mo>∗</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>b</mi></mrow><annotation encoding="application/x-tex">v[i] = d[i].t ，\; w[i] = d[i].a - j * d[i].b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">，</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">b</span></span></span></span><br>
所以循环处理方式就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>d</mi><mi>p</mi><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>t</mi><mo stretchy="false">]</mo><mo>+</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>a</mi><mo>−</mo><mi>j</mi><mo>∗</mo><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mi mathvariant="normal">.</mi><mi>b</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">dp[j] = max(dp[j], dp[j-d[i].t]+d[i].a-j*d[i].b)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">p</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mord">.</span><span class="mord mathnormal">b</span><span class="mclose">)</span></span></span></span></p>
<pre><code class="language-cpp"><div><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dish</span>//菜的<span class="hljs-title">a</span>,<span class="hljs-title">b</span>和用时<span class="hljs-title">t</span>
{</span>
    ll a, b, t;
    <span class="hljs-keyword">friend</span> <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span> &lt; (node a, node b) {
	    <span class="hljs-keyword">return</span> a.b * b.t &gt; b.b * a.t;
    }
} d[<span class="hljs-number">100</span>];

ll T, n;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">cin</span> &gt;&gt; T &gt;&gt; n;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)
        <span class="hljs-built_in">cin</span> &gt;&gt; d[i].a;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)
        <span class="hljs-built_in">cin</span> &gt;&gt; d[i].b;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)
        <span class="hljs-built_in">cin</span> &gt;&gt; d[i].t;
    sort(d + <span class="hljs-number">1</span>, d + <span class="hljs-number">1</span> + n, cmp);

    ll dp[<span class="hljs-number">100005</span>] = {<span class="hljs-number">0</span>};
    ll max1 = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++){
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = T; j &gt;= d[i].t; j--){
            dp[j] = max(dp[j], dp[j - d[i].t] + d[i].a - j * d[i].b);<span class="hljs-comment">//正常01背包价值模拟，要注意时间是j</span>
            max1 = max(max1, dp[j]);<span class="hljs-comment">//用的是该方案中最后的时间，不一定时间越靠后越好</span>
        }
    }
    <span class="hljs-built_in">cout</span> &lt;&lt; max1 &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre></body>
